    L.mapbox.accessToken = 'pk.eyJ1IjoiZGFpbHlwZW5uIiwiYSI6ImNpanFueGV4cTAyeWx0b201dXpzeGU3aDEifQ.6V-cf4TqyBJ9Yj9XXjQVJA';

    var geojson =
      {"type":"FeatureCollection","features":[{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20113438367844,39.951052915314065],[-75.20106196403503,39.95104263449614],[-75.20104855298995,39.951116656350735],[-75.20097345113754,39.95111254402757],[-75.20092517137527,39.95134077758866],[-75.2010726928711,39.9513572268249],[-75.20113438367844,39.951052915314065]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20160913467407,39.951176285008664],[-75.20138248801231,39.95114544260587],[-75.20133554935455,39.95138190067186],[-75.20142808556557,39.95138806913218],[-75.20144417881966,39.951300682558745],[-75.2014696598053,39.95129142985621],[-75.20159170031546,39.95129862640274],[-75.20160913467407,39.951176285008664]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20133554935455,39.95105188723236],[-75.20127519965172,39.9510467468235],[-75.20121484994888,39.951356198747746],[-75.20128458738327,39.95136339528748],[-75.20133554935455,39.95105188723236]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20247414708138,39.95151246629711],[-75.20251974463461,39.95127703676084],[-75.20237490534782,39.95125544711216],[-75.20232930779457,39.951489848647604],[-75.20247414708138,39.95151246629711]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20196452736855,39.95144152909856],[-75.2019953727722,39.951221520507595],[-75.20194709300995,39.951213295873664],[-75.20193502306937,39.9512307732196],[-75.20192429423332,39.95121123971501],[-75.20188137888908,39.95120815547694],[-75.2018330991268,39.95141891142559],[-75.20196452736855,39.95144152909856]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.2018290758133,39.95141788334936],[-75.20187467336653,39.95115366724799],[-75.2017579972744,39.951138246043215],[-75.20169094204903,39.951402462204165],[-75.2018290758133,39.95141788334936]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20053625106812,39.95202752983678],[-75.20056575536726,39.951900049401715],[-75.20020365715027,39.951852758212155],[-75.20016878843307,39.951994631682716],[-75.20053625106812,39.95202752983678]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20031362771988,39.95291988622947],[-75.20036727190018,39.952771846343104],[-75.20014464855194,39.952749229110026],[-75.20011514425278,39.952893156829255],[-75.20031362771988,39.95291988622947]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.19980937242508,39.952915774014755],[-75.19985228776932,39.95275128522245],[-75.19977450370789,39.952745116885026],[-75.19978255033493,39.952697826279774],[-75.1996698975563,39.95268137736594],[-75.199616253376,39.952950727832146],[-75.19971549510956,39.952958952257184],[-75.19972890615463,39.95290960569217],[-75.19980937242508,39.952915774014755]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20033374428749,39.954220361737974],[-75.20031496882439,39.95430671654837],[-75.20056039094925,39.954341669654944],[-75.20056575536726,39.95431802490836],[-75.20063012838364,39.95432624916894],[-75.20064353942871,39.954287183922226],[-75.20057111978531,39.954283071789696],[-75.20057514309883,39.95425531488864],[-75.20033374428749,39.954220361737974]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20060062408447,39.95441465990808],[-75.20060732960701,39.954362230297505],[-75.2005523443222,39.95435811816948],[-75.20056173205376,39.954341669654944],[-75.20031228661537,39.95430774458117],[-75.2003002166748,39.954378678807124],[-75.20060062408447,39.95441465990808]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20057514309883,39.954521575067844],[-75.20057916641235,39.95448045387234],[-75.2004061639309,39.9544619493263],[-75.20041018724442,39.954448584928805],[-75.20029619336128,39.954436248559574],[-75.20028412342072,39.95448662205325],[-75.20057514309883,39.954521575067844]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.20013123750687,39.953953072347964],[-75.1999743282795,39.953933539620834],[-75.19994616508484,39.95406512841171],[-75.19997030496597,39.95406615644813],[-75.19995957612991,39.95413503485389],[-75.20000785589218,39.95414017503065],[-75.19999980926514,39.954181296430754],[-75.20005881786346,39.954186436604026],[-75.20007625222206,39.95409082931788],[-75.20010441541672,39.95409494146196],[-75.20013123750687,39.953953072347964]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.19988313317299,39.954125782534774],[-75.1999032497406,39.95403531534847],[-75.19992873072624,39.95403737142219],[-75.19994616508484,39.953946904118936],[-75.1997946202755,39.95393045550551],[-75.19978389143944,39.954015782644795],[-75.19979998469351,39.95401886675628],[-75.19978523254395,39.95411653021439],[-75.19988313317299,39.954125782534774]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.19969671964645,39.95395204430982],[-75.19952908158302,39.95393251158241],[-75.19949555397034,39.95408980128182],[-75.19955188035965,39.95410008164172],[-75.19955053925514,39.95411241807158],[-75.19958406686783,39.95411653021439],[-75.1995612680912,39.95423475421392],[-75.19962698221207,39.95424297848456],[-75.19969940185545,39.95395718450035],[-75.19969671964645,39.95395204430982]]]}},{"type":"Feature","properties":{},"geometry":{"type":"Polygon","coordinates":[[[-75.19946739077568,39.95407952092036],[-75.1994888484478,39.95401167049595],[-75.19946739077568,39.954003446197504],[-75.19947275519371,39.9539777452585],[-75.19950091838837,39.953978773296264],[-75.19950896501541,39.95395204430982],[-75.19948750734329,39.95394587608072],[-75.19950091838837,39.95387185728795],[-75.19935742020607,39.953853352577234],[-75.19931852817535,39.954061016265825],[-75.19937217235565,39.95406718448454],[-75.19936680793762,39.9540856891374],[-75.19940569996834,39.95408980128182],[-75.19940972328186,39.95407129663008],[-75.19946739077568,39.95407952092036]]]}}]}
    ;
    var map = L.mapbox.map('map', '', {
      attributionControl: false,
      zoomControl: false,
      minZoom: 16,
      maxZoom: 16,
      maxBounds: [[39.96,-75.22],[39.945,-75.17]]
    }).setView([39.9538660000001, -75.19730770000001], 16);
    var listings = document.getElementById('listings');
    var locations = L.mapbox.featureLayer().addTo(map);
    locations.setGeoJSON(geojson);

    L.mapbox.styleLayer('mapbox://styles/dailypenn/cijqnygqv005y94kqwb3xs46l').addTo(map);


    // disable drag and zoom
    // map.dragging.disable();
    map.touchZoom.disable();
    map.doubleClickZoom.disable();
    map.scrollWheelZoom.disable();

    var credits = L.control.attribution().addTo(map);
    credits.addAttribution('©2017 The Daily Pennsylvanian. Maps © Mapbox © OpenStreetMaps');

    function setActive(el) {
        var siblings = document.getElementsByClassName('vendor');
        for (var i = 0; i < siblings.length; i++) {
          siblings[i].className = siblings[i].className
          .replace(/active/, '').replace(/\s\s*$/, '');
        }

        el.className += ' active';
      }

      locations.eachLayer(function(locale) {

        // Shorten locale.feature.properties to just `prop` so we're not
        // writing this long form over and over again.
        var prop = locale.feature.properties;

        var listing = document.getElementById(prop.id);
        var link = document.getElementById(prop.id);

        // Each marker on the map.
        var popup = '<h3 class="tooltip-title">' + prop.title + '</h3> <div class="tooltip-content"><div class="addr">' + prop.address + "</div><br>" + prop.description;

        link.onclick = function() {
          setActive(listing);
          map.setView(locale.getLatLng(), 16);
          locale.openPopup();
          return false;
        };

        // Marker interaction
        locale.on('click', function(e) {
          // Set active the markers associated listing.
          setActive(listing);
        });

        popup += '</div>';
        locale.bindPopup(popup);
    });
